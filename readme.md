# Code Supplement for:  "A new climatology of continentality based on Lagrangian air mass travel times from the ocean"

This repository contains all code and data necessary to reproduce the analyses and figures presented in the paper.

The main dataset is `residence_time.nc`. The code is provided as a Python script and a series of Jupyter Notebooks, detailing the workflow from raw data processing to final figure generation.

## File Manifest

* **`residence_time.nc`**: The primary, aggregated NetCDF dataset of gridded residence times. This file is the direct input for the figure-generating notebooks.
* **`calculate_travel_times.py`**: The main Python script used to process the source LARA trajectory data. This script is computationally intensive and designed to be run in parallel on a high-performance computing (HPC) cluster, as it processes raw data month by month.
* **`create_final_dataset.ipynb`**: A Jupyter Notebook that reads the individual monthly output files (generated by `calculate_travel_times.py`) and aggregates them to create the final, single `residence_time.nc` file.
* **`Fig_1_2.ipynb`**: A Jupyter Notebook that loads `residence_time.nc` to generate Figures 1 and 2 in the publication.
* **`Fig_3.ipynb`**: A Jupyter Notebook that loads `residence_time.nc` to generate Figure 3 in the publication.

## Requirements

The core Python dependencies required to run this code are:
* `numpy`
* `xarray`
* `scipy`
* `cfgrib` (for reading the sea ice GRIB file)
* `jupyter` (for running the notebooks)
* `matplotlib` / `cartopy`

## Workflow (How to Run)

1.  **Step 1:** Run `calculate_travel_times.py` on the raw LARA dataset. This is a long, parallel process that creates many intermediate monthly files. Alternatively, download the dataset `residence_time.nc` directly.
2.  **Step 2:** Run the `create_final_dataset.ipynb` notebook to aggregate all intermediate files into `residence_time.nc`.
3.  **Step 3:** Run `Fig_1_2.ipynb` and `Fig_3.ipynb` to reproduce the figures from the paper.

## Citation

When using this dataset or code, please cite both the original publication and this Zenodo archive.

* **Paper:** 
Brack, G., DÃ¼tsch, M., & Stohl, A. (manuscript submitted). A new climatology of continentality based on Lagrangian air mass travel times from the ocean. Geophysical Research Letters.
* **This Dataset/Code:** [Your Zenodo DOI will go here (e.g., 10.5281/zenodo.XXXXXXX)]